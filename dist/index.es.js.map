{"version":3,"file":"index.es.js","sources":["../src/utility.js","../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["\r\nexport function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n      var context = this, args = arguments;\r\n      var later = function() {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      var callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    };\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\r\nimport {debounce} from './utility'\r\nimport './styles.css';\r\n\r\n/*\r\n  @const Key Codes\r\n*/\r\nconst DOWN=40,UP=38,ENTER=13;\r\n\r\nexport class SingleLineMention extends Component {\r\n  constructor(props){\r\n    super(props);\r\n    this.state={\r\n      suggestionList:[],\r\n      currtIndex:0,\r\n      left:0\r\n    }\r\n    this.onChange=this.onChange.bind(this);\r\n    this.appendValue=this.appendValue.bind(this);\r\n    this.keyUpHandle=this.keyUpHandle.bind(this);\r\n    this.onBlur=this.onBlur.bind(this);\r\n    this.call_parent=debounce(this.call_parent.bind(this),props.waitTime || 500)\r\n  }\r\n\r\n  componentDidMount(e){\r\n    document.addEventListener('click',(e)=>{\r\n        let container=document.getElementById(\"suggestion-input\");\r\n        if(e.target!==container)\r\n        {\r\n          this.setState({\r\n            suggestionList:[]\r\n          })\r\n        }\r\n    })  \r\n  }\r\n\r\n\r\n //Async call to get Suggestions\r\n\r\n  call_parent(value){\r\n    if(this.props.onChange && typeof(this.props.onChange)==\"function\"){\r\n      this.props.onChange(value);\r\n    }\r\n  }\r\n\r\n  //when  onBlur props is not provided\r\n\r\n  onBlur(e){\r\n\r\n  }\r\n\r\n  // When Suggestion Selected\r\n\r\n  appendValue(value){\r\n    if(this.inputValue.value){\r\n      let index=this.inputValue.value.lastIndexOf('@')\r\n      let newValue=this.inputValue.value.substr(0,index+1)+value;\r\n      if(newValue)\r\n      {\r\n      this.inputValue.value=newValue;\r\n      }\r\n       this.setState({\r\n       suggestionList:[]\r\n    })\r\n    }\r\n    this.inputValue.focus()\r\n  }\r\n\r\n  // Finding Suggestion Box Postion Dynamically\r\n\r\n  findSuggestionBoxPostion=(value,left)=>{\r\n    let index=value.lastIndexOf('@')\r\n          let key=value.substr(index+1)\r\n\r\n          let filteredSuggestion=this.props.data.filter((item)=>{\r\n             return item.indexOf(key)!==-1\r\n          })\r\n          this.setState({\r\n              suggestionList:filteredSuggestion,\r\n              currtIndex:0,\r\n              left\r\n          })\r\n  }\r\n\r\n\r\n\r\n  onChange(e){\r\n    \r\n    e.preventDefault();\r\n    this.call_parent(e.target.value);\r\n    let width=this.inputValue && this.inputValue.offsetWidth;\r\n    if(e.target.value)\r\n    {  \r\n        let value=e.target.value;\r\n        let left=(value.length*(this.props.fontSize) > width) ? width-60: value.length*(8-1) ;\r\n\r\n        // Finding Postion Dynamically when the length is greater than 1\r\n        if(value.length>1)\r\n        {\r\n          \r\n          this.findSuggestionBoxPostion(value,left)\r\n        }\r\n         // Keeping Suggestion Box at default position\r\n        else{\r\n          this.setState({\r\n            suggestionList:[],\r\n            currtIndex:0,\r\n            left\r\n          })\r\n        }\r\n        this.inputValue.focus()\r\n  }\r\n}\r\n\r\n//moving to the top of the Suggestions List\r\n\r\nmovingToTop = () =>{\r\n  let newIndex=this.state.currtIndex-1;\r\n  if(newIndex<0){\r\n    newIndex=0\r\n  }\r\n  this.setState({\r\n    currtIndex:newIndex\r\n  })\r\n  \r\n  if (typeof this.inputValue.selectionStart == \"number\") {\r\n    this.inputValue.selectionStart = this.inputValue.selectionEnd = this.inputValue.value.length;\r\n  } else if (typeof this.inputValue.createTextRange != \"undefined\") {\r\n    this.inputValue.focus();\r\n    let range = this.inputValue.createTextRange();\r\n    range.collapse(false);\r\n    range.select();\r\n  }\r\n}\r\n\r\n//moving to the Bottom of the Suggestions List\r\n\r\nmovingDown = () =>{\r\n  let newIndex=this.state.currtIndex+1;\r\n  if(newIndex==this.state.suggestionList.length){\r\n    newIndex=this.state.suggestionList.length-1;\r\n  }\r\n  this.setState({\r\n    currtIndex:newIndex\r\n  })\r\n \r\n}\r\n\r\n//Suggestion Selected with Enter\r\n\r\nOnEnterClick = () =>{\r\n  let index=this.inputValue.value.lastIndexOf(this.props.trigger || '@');\r\n  let newValue=\"\"\r\n  this.setState({\r\n    suggestionList:[]\r\n   })\r\n  if(this.inputValue.value.length>0 && this.state.suggestionList.length>0)\r\n  {\r\n    newValue= this.inputValue.value.substr(0,index+1)+this.state.suggestionList[this.state.currtIndex || 0];\r\n  }\r\n\r\n  if(!!newValue)\r\n  {\r\n   this.inputValue.value=newValue;\r\n\r\n  }\r\n}\r\n\r\n\r\nkeyUpHandle(e){\r\n    e.preventDefault();\r\n    \r\n    if((e.keyCode==ENTER || e.target.keyCode==ENTER)){\r\n   \r\n      this.OnEnterClick();\r\n    }\r\n    else if(e.keyCode==DOWN)\r\n    {\r\n      this.movingDown();\r\n    }\r\n    else if(e.keyCode==UP)\r\n    {\r\n      this.movingToTop();\r\n    }\r\n     \r\n    \r\n  }\r\n\r\n  render() {\r\n\r\n    let optionList=\"\";\r\n    let {left}=this.state;\r\n    let parentStyle=(this.props.suggestionsHolder)?this.props.suggestionsHolder:'suggestionsHolder';\r\n\r\n    // Rendering Suggestion List\r\n\r\n   if(this.state.suggestionList) \r\n   { \r\n      optionList=this.state.suggestionList.map((item,index)=>{\r\n        return<p className={(index==this.state.currtIndex)?`${(this.props.activeClassname)? this.props.activeClassname:'active'} ${(this.props.suggestionClassName)?this.props.suggestionClassName :'suggestion'}`:`${this.props.suggestionClassName}`} key={index} onClick={()=>{console.log(item);this.appendValue(item)}}>{item}</p>\r\n    })\r\n  }\r\n   \r\n  // Input Box\r\n    return (\r\n      <div id=\"suggestion-input\"  style={{display:\"inline-block\",position:\"relative\",width:`${this.props.InputWidth || 50}`}}>\r\n\r\n              <input class={this.props.inputClassName || \"\"} id=\"input\" autoFocus={true} onKeyUp={this.keyUpHandle} style={{fontSize:this.props.fontSize || 8,width:(this.props.InputWidth||180)}}   ref={(inpt)=>{this.inputValue=inpt}} onChange={this.onChange} onBlur={this.onBlur} />\r\n               <div id=\"suggestions\" className={parentStyle}  style={{position:'absolute',left:`${left}px`}}>\r\n                { optionList}\r\n               </div>\r\n     \r\n           \r\n      </div>\r\n    );\r\n  }\r\n}\r\n"],"names":["debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","setTimeout","DOWN","UP","ENTER","SingleLineMention","props","findSuggestionBoxPostion","value","left","index","lastIndexOf","key","substr","filteredSuggestion","data","filter","item","indexOf","setState","movingToTop","newIndex","state","currtIndex","inputValue","selectionStart","selectionEnd","length","createTextRange","focus","range","collapse","select","movingDown","suggestionList","OnEnterClick","trigger","newValue","onChange","bind","appendValue","keyUpHandle","onBlur","call_parent","waitTime","e","addEventListener","container","document","getElementById","target","preventDefault","width","offsetWidth","fontSize","keyCode","optionList","parentStyle","suggestionsHolder","map","activeClassname","suggestionClassName","log","display","position","InputWidth","inputClassName","inpt","Component"],"mappings":"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"}