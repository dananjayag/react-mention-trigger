{"version":3,"file":"index.js","sources":["../src/utility.js","../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["\r\nexport function debounce(func, wait, immediate) {\r\n    var timeout;\r\n    return function() {\r\n      var context = this, args = arguments;\r\n      var later = function() {\r\n        timeout = null;\r\n        if (!immediate) func.apply(context, args);\r\n      };\r\n      var callNow = immediate && !timeout;\r\n      clearTimeout(timeout);\r\n      timeout = setTimeout(later, wait);\r\n      if (callNow) func.apply(context, args);\r\n    };\r\n  }\r\n\r\n\r\n\r\n\r\n\r\n\r\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React, { Component } from 'react';\nimport {debounce} from './utility'\nimport './styles.css';\nexport class SingleLineMention extends Component {\n  constructor(props){\n    super(props);\n    this.state={\n      suggestionList:[],\n      currtIndex:0,\n      left:0\n    }\n    this.onChange=this.onChange.bind(this);\n    this.appendValue=this.appendValue.bind(this);\n    this.keyUpHandle=this.keyUpHandle.bind(this);\n    this.onBlur=this.onBlur.bind(this);\n    this.call_parent=debounce(this.call_parent.bind(this),props.waitTime || 500)\n  }\n\n  componentDidMount(e){\n    document.addEventListener('click',(e)=>{\n        let container=document.getElementById(\"suggestion-input\");\n        if(e.target!==container)\n        {\n          this.setState({\n            suggestionList:[]\n          })\n        }\n    })  \n  }\n  call_parent(value){\n    if(this.props.onChange && typeof(this.props.onChange)==\"function\"){\n      this.props.onChange(value);\n    }\n  }\n  onBlur(e){\n\n  }\n  appendValue(value){\n    if(this.inputValue.value){\n      let index=this.inputValue.value.lastIndexOf('@')\n      let newValue=this.inputValue.value.substr(0,index+1)+value;\n      if(newValue)\n      {\n      this.inputValue.value=newValue;\n      }\n       this.setState({\n       suggestionList:[]\n    })\n    }\n    this.inputValue.focus()\n  }\n  onChange(e){\n    \n    e.preventDefault();\n    this.call_parent(e.target.value);\n    let width=this.inputValue && this.inputValue.offsetWidth;\n    if(e.target.value)\n    {  \n        let value=e.target.value;\n        let left=(value.length*(this.props.fontSize) > width) ? width-60: value.length*(8-1) ;\n        if(value.length>1)\n        {\n          let index=value.lastIndexOf('@')\n          let key=value.substr(index+1)\n\n          let filteredSuggestion=this.props.data.filter((item)=>{\n             return item.indexOf(key)!==-1\n          })\n          this.setState({\n              suggestionList:filteredSuggestion,\n              currtIndex:0,\n              left\n          })\n        }\n        else{\n          this.setState({\n            suggestionList:[],\n            currtIndex:0,\n            left\n          })\n        }\n        this.inputValue.focus()\n  }\n}\n  keyUpHandle(e){\n    e.preventDefault();\n    \n   let DOWN=40,UP=38;\n    if((e.keyCode==13 || e.target.keyCode==13)){\n        let index=this.inputValue.value.lastIndexOf(this.props.trigger || '@');\n        let newValue=\"\"\n        this.setState({\n          suggestionList:[]\n         })\n        if(this.inputValue.value.length>0 && this.state.suggestionList.length>0)\n        {\n          newValue= this.inputValue.value.substr(0,index+1)+this.state.suggestionList[this.state.currtIndex || 0];\n        }\n\n        if(!!newValue)\n        {\n         this.inputValue.value=newValue;\n      \n        }\n       \n      \n     \n    }\n    else if(e.keyCode==DOWN)\n    {\n      let newIndex=this.state.currtIndex+1;\n      if(newIndex==this.state.suggestionList.length){\n        newIndex=this.state.suggestionList.length-1;\n      }\n      this.setState({\n        currtIndex:newIndex\n      })\n     \n    }\n    else if(e.keyCode==UP)\n    {\n      let newIndex=this.state.currtIndex-1;\n      if(newIndex<0){\n        newIndex=0\n      }\n      this.setState({\n        currtIndex:newIndex\n      })\n      \n      if (typeof this.inputValue.selectionStart == \"number\") {\n        this.inputValue.selectionStart = this.inputValue.selectionEnd = this.inputValue.value.length;\n      } else if (typeof this.inputValue.createTextRange != \"undefined\") {\n        this.inputValue.focus();\n        let range = this.inputValue.createTextRange();\n        range.collapse(false);\n        range.select();\n      }\n    }\n     \n    \n  }\n\n  render() {\n    let optionList=\"\";\n    let {left}=this.state;\n    let parentStyle=(this.props.suggestionsHolder)?this.props.suggestionsHolder:'suggestionsHolder';\n   if(this.state.suggestionList) \n   { \n      optionList=this.state.suggestionList.map((item,index)=>{\n        return<p className={(index==this.state.currtIndex)?`${(this.props.activeClassname)? this.props.activeClassname:'active'} ${(this.props.suggestionClassName)?this.props.suggestionClassName :'suggestion'}`:`${this.props.suggestionClassName}`} key={index} onClick={()=>{console.log(item);this.appendValue(item)}}>{item}</p>\n    })\n  }\n   \n    return (\n      <div id=\"suggestion-input\"  style={{display:\"inline-block\",position:\"relative\",width:`${this.props.InputWidth || 50}`}}>\n\n              <input class={this.props.inputClassName || \"\"} id=\"input\" autoFocus={true} onKeyUp={this.keyUpHandle} onBlur={this.onBlur} style={{fontSize:this.props.fontSize || 8,width:(this.props.InputWidth||180)}}   ref={(inpt)=>{this.inputValue=inpt}} onChange={this.onChange} onBlur={this.onBlur} />\n               <div id=\"suggestions\" className={parentStyle}  style={{position:'absolute',left:`${left}px`}}>\n                { optionList}\n               </div>\n     \n           \n      </div>\n    );\n  }\n}\n"],"names":["debounce","func","wait","immediate","timeout","context","args","arguments","later","apply","callNow","setTimeout","SingleLineMention","props","state","onChange","bind","appendValue","keyUpHandle","onBlur","call_parent","waitTime","e","addEventListener","container","document","getElementById","target","setState","value","inputValue","index","lastIndexOf","newValue","substr","focus","preventDefault","width","offsetWidth","left","length","fontSize","key","filteredSuggestion","data","filter","item","indexOf","DOWN","UP","keyCode","trigger","suggestionList","currtIndex","newIndex","selectionStart","selectionEnd","createTextRange","range","collapse","select","optionList","parentStyle","suggestionsHolder","map","React","activeClassname","suggestionClassName","log","display","position","InputWidth","inputClassName","inpt","Component"],"mappings":"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"}